<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    

   
   
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="box">
        <div class="form">
            
        
    
    <form >
        <h2>Sing Up</h2>

        <div class="inputbox">
            <label for="username">Username:</label>
          
        <input type="text" id="username" name="username" required>
        

    </div>
        <div class="inputbox">
            <label for="password">Password:</label>
            
        <input type="password" id="password" name="password" required>
        
    </div>
        <div class="inputbox">
            <label for="email">Email:</label>
            
        <input type="email" id="email" name="email" required >
        
    </div>

        <div class="inputbox">
            <label for="phone">Phone number:</label>

            
        <input type="tel" id="phone"  name="phone" required >
       
 </div>

 
        <input type="submit" value="submit" class="sub"  id ="submit">
    
    
    </form>

   
</div>
</div>


       
    <script type="module">
        
        
        
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";  
    import { getDatabase,ref ,set ,get ,child } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";
    
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBMN0hVPPiJpSc27LAgKyUb92VvEESXo5k",
      authDomain: "registration-25bf1.firebaseapp.com",
      databaseURL: "https://registration-25bf1-default-rtdb.firebaseio.com",
      projectId: "registration-25bf1",
      storageBucket: "registration-25bf1.appspot.com",
      messagingSenderId: "214695886883",
      appId: "1:214695886883:web:575ca08cb2f7553319f196"
    };
    
   firebase.initializeApp(firebaseConfig);

        // Reference to Firebase Firestore
        var db = firebase.firestore();

        // Function to validate the registration form
        function validateForm() {
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            var email = document.getElementById("email").value;
            var phone = document.getElementById("phone").value;

            // Validation rules
            var usernameRegex = /^\S+$/;  // No spaces
            var passwordRegex = /^(?=.*\d)(?=.*[A-Z])(?=.*[\W_]).{8,}$/;  // At least 1 digit, 1 uppercase, 1 special character, and 8 characters
            var emailRegex = /^\S+@\S+\.\S+$/;  // Email format
            var phoneRegex = /^07\d{8}$/;  // 10 digits starting with '07'

            if (!username.match(usernameRegex)) {
                alert("Username cannot contain spaces.");
                return false;
            }

            if (!password.match(passwordRegex)) {
                alert("Password must be at least 8 characters, with 1 number, 1 uppercase, and 1 special character.");
                return false;
            }

            if (!email.match(emailRegex)) {
                alert("Invalid email format.");
                return false;
            }

            if (!phone.match(phoneRegex)) {
                alert("Phone number must be 10 digits starting with '07'.");
                return false;
            }

            // Check if the user already exists (replace 'users' with your Firebase collection name)
            db.collection("users").where("username", "==", username).get().then((querySnapshot) => {
                if (!querySnapshot.empty) {
                    alert("Username already exists. Please choose another one.");
                } else {
                    // User does not exist, proceed with registration
                    // Replace this with your registration logic (e.g., creating a new user in Firestore)
                }
            });
        }
    
     
     
     
    </script>    
    <!-- <script src="app.js"></script> -->

</body>
</html>